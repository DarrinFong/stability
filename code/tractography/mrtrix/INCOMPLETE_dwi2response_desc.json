{
    "author": "Darrin Fong",
    "command-line": "dwi2response [SHELLS] [LMAX] [MASK] [VOXELS] [GRAD] [FSLGRAD] [BVECS] [BVALS] [CONTINUE] [CTEMPDIR] [LASTFILE] [FORCE] [HELP] [NOCLEANUP] [NTHREADS] [TEMPDIR] [QUIET] [INFO] [DEBUG] [ALGORITHM] [INPUT]",
    "container-image": {
        "image": "darrinfong/mrtrix3:latest",
        "index": "index.docker.io",
        "type": "docker"
    },
    "tool-version": "3.0_RC3_latest",
    "name": "dwi2response Response function estimation",
    "description": "Dwi2response acts as a 'master' script for performing various types of response function estimation; a range of different algorithms are available for completing this task. When using this script, the name of the algorithm to be used must appear as the first argument on the command-line after 'dwi2response'. The subsequent compulsory arguments and options available depend on the particular algorithm being invoked. Each algorithm available also has its own help page, including necessary references; e.g. to see the help page of the 'fa' algorithm, type 'dwi2response fa'.",
    "inputs": [
        {
            "command-line-flag": "-shells",
            "description": "The b-value shell(s) to use in response function estimation (single value for single-shell response, comma-separated list for multi-shell response)",
            "id": "shells",
            "name": "Diffusion-weighted gradient shell(s)",
            "optional": true,
            "list": true,
            "type": "Number",
            "value-key": "[SHELLS]"
        },
        {
            "command-line-flag": "-lmax",
            "description": "The maximum harmonic degree(s) of response function estimation (single value for single-shell response, comma-separated list for multi-shell response)",
            "id": "lmax",
            "name": "Maximum harmonic degree",
            "optional": true,
            "list": true,
            "integer": true,
            "type": "Number",
            "value-key": "[LMAX]"
        },
        {
            "command-line-flag": "-mask",
            "description": "Provide an initial mask for response voxel selection",
            "id": "mask",
            "name": "Initial mask image",
            "optional": true,
            "type": "File",
            "value-key": "[MASK]"
        },
        {
            "command-line-flag": "-voxels",
            "description": "Output an image showing the final voxel selection(s)",
            "id": "voxels",
            "name": "single-fiber voxels",
            "optional": true,
            "type": "File",
            "value-key": "[VOXELS]"
        },
        {
            "command-line-flag": "-grad",
            "description": "Pass the diffusion gradient table in MRtrix format",
            "id": "grad",
            "name": "grad",
            "optional": true,
            "type": "File",
            "value-key": "[GRAD]"
        },
        {
            "command-line-flag": "-fslgrad",
            "description": "Pass the diffusion gradient table in FSL bvecs/bvals format",
            "id": "fslgrad",
            "name": "fslgrad",
            "optional": true,
            "type": "Flag",
            "value-key": "[FSLGRAD]",
            "requires-inputs": ["bvecs", "bvals"]
        },
        {
            "description": "Pass the diffusion gradient table in FSL bvecs format",
            "id": "bvecs",
            "name": "bvecs",
            "optional": true,
            "type": "File",
            "value-key": "[BVECS]",
            "requires-inputs": ["fslgrad", "bvals"]
        },
        {
            "description": "Pass the diffusion gradient table in FSL bvals format",
            "id": "bvals",
            "name": "bvals",
            "optional": true,
            "type": "File",
            "value-key": "[BVALS]",
            "requires-inputs": ["fslgrad", "bvecs"]
        },
        {
            "command-line-flag": "-continue",
            "description": "Continue the script from a previous execution; must provide the temporary directory path, and the name of the last successfully-generated file",
            "id": "continue",
            "name": "continue",
            "optional": true,
            "type": "Flag",
            "value-key": "[CONTINUE]",
            "requires-inputs": ["ctempdir",  "lastfile"]
        },
        {
            "description": "Temporary directory path",
            "id": "ctempdir",
            "name": "Temporary directory path",
            "optional": true,
            "type": "File",
            "value-key": "[CTEMPDIR]",
            "requires-inputs": ["continue",  "lastfile"]
        },
        {
            "description": "Path to last successfully-generated file",
            "id": "lastfile",
            "name": "Last successfully-generated file",
            "optional": true,
            "type": "File",
            "value-key": "[LASTFILE]",
            "requires-inputs": ["continue",  "ctempdir"]
        },
        {
            "command-line-flag": "-force",
            "description": "Force overwrite of output files if pre-existing",
            "id": "force",
            "name": "force",
            "optional": true,
            "type": "Flag",
            "value-key": "[FORCE]"
        },
        {
            "command-line-flag": "-help",
            "description": "Display help information for the script",
            "id": "help",
            "name": "help",
            "optional": true,
            "type": "Flag",
            "value-key": "[HELP]"
        },
        {
            "command-line-flag": "-nocleanup",
            "description": "Do not delete temporary files during script, or temporary directory at script completion",
            "id": "nocleanup",
            "name": "nocleanup",
            "optional": true,
            "type": "Flag",
            "value-key": "[NOCLEANUP]"
        },
        {
            "command-line-flag": "-nthreads",
            "description": "Use this number of threads in MRtrix multi-threaded applications (0 disables multi-threading)",
            "id": "nthreads",
            "name": "nthreads",
            "optional": true,
            "integer": true,
            "type": "Number",
            "value-key": "[NTHREADS]"
        },
        {
            "command-line-flag": "-tempdir",
            "description": "Manually specify the path in which to generate the temporary directory",
            "id": "tempdir",
            "name": "tempdir",
            "optional": true,
            "type": "File",
            "value-key": "[TEMPDIR]"
        },
        {
            "command-line-flag": "-quiet",
            "description": "Suppress all console output during script execution",
            "id": "quiet",
            "name": "quiet",
            "optional": true,
            "type": "Flag",
            "value-key": "[QUIET]",
            "disables-inputs": ["info", "debug"]
        },
        {
            "command-line-flag": "-info",
            "description": "Display additional information and progress for every command invoked",
            "id": "info",
            "name": "info",
            "optional": true,
            "type": "Flag",
            "value-key": "[INFO]",
            "disables-inputs": ["quiet", "debug"]
        },
        {
            "command-line-flag": "-debug",
            "description": "Display additional debugging information over and above the output of -info",
            "id": "debug",
            "name": "debug",
            "optional": true,
            "type": "Flag",
            "value-key": "[DEBUG]",
            "disables-inputs": ["info", "quiet"]
        },
        {
            "command-line-flag": "-algorithm",
            "description": "The input diffusion-weighted images",
            "id": "algorithm",
            "name": "algorithm",
            "optional": false,
            "type": "String",
            "value-key": "[ALGORITHM]",
            "value-choices": ["dhollander", "fa", "manual", "msmt_5tt", "tax", "tournier"],
            "value-requires": {
                "dhollander": ["out_sfwm", "out_gm", "out_csf"],
                "fa": ["output"],
                "manual": ["in_voxels", "output"],
                "msmt_5tt": ["in_5tt", "out_wm", "out_gm", "out_csf"],
                "tax": ["output"],
                "tournier": ["output"]
            },
            "value-disables": {
                "dhollander": [""],
                "fa": [""],
                "manual": [""],
                "msmt_5tt": [""],
                "tax": [""],
                "tournier": [""]
            }
        },
        {
            "description": "The input DWI",
            "id": "input",
            "name": "Input DWI",
            "optional": false,
            "type": "File",
            "value-key": "[INPUT]"
        },
        {
            "description": "Output single-fibre WM response text file",
            "id": "out_sfwm",
            "name": "Output single-fibre WM",
            "optional": true,
            "type": "File",
            "value-key": "[OUT_SFWM]"
        },
        {
            "description": "Output GM response text file",
            "id": "out_gm",
            "name": "Output GM",
            "optional": true,
            "type": "File",
            "value-key": "[OUT_GM]"
        },
        {
            "description": "Output CSF response text file",
            "id": "out_csf",
            "name": "Output CSF",
            "optional": true,
            "type": "File",
            "value-key": "[OUT_CSF]"
        }
    ],
    "output-files": [
        {
            "id": "rotational_harmonic_coefficient_out",
            "name": "Rotational harmonic coefficient output",
            "optional": false,
            "path-template": "[RESPONSE_OUT].txt",
            "path-template-stripped-extensions": [
                ".nii.gz",
                ".nii",
                ".json"
            ]
        },
        {
            "id": "sf_voxels_mask",
            "name": "SF voxels selection mask",
            "optional": true,
            "path-template": "[SF].mif",
            "path-template-stripped-extensions": [
                ".nii.gz",
                ".nii",
                ".json"
            ]
        }
    ],
    "schema-version": "0.5",
    "suggested-resources": {
        "cpu-cores": 1,
        "ram": 2048,
        "walltime-estimate": 20
    },
    "tags": {
        "domain": [
            "neuroinformatics",
            "image processing",
            "mri",
            "dwi",
            "tractography"
        ]
    }
}