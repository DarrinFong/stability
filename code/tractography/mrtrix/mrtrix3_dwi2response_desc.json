{
    "author": "Darrin Fong",
    "command-line": "dwi2response [GRAD] [FSLGRAD] [BVECS] [BVALS] [BVALUE_SCALING] [SHELL] [MASK] [LMAX] [SF] [TEST_ALL] [MAX_ITERS] [MAX_CHANGE] [VOLUME_RATIO] [DISPERSION_MULTIPLIER] [INTEGRAL_MULTIPLIER] [INFO] [QUIET] [DEBUG] [FORCE] [NTHREADS] [FAILONWARN] [HELP] [VERSION] [DWI_IN] [RESPONSE_OUT]",
    "container-image": {
        "image": "darrinfong/mrtrix3:latest",
        "index": "index.docker.io",
        "type": "docker"
    },
    "name": "dwi2response Response function estimation",
    "description": "Dwi2response acts as a 'master' script for performing various types of response function estimation; a range of different algorithms are available for completing this task. When using this script, the name of the algorithm to be used must appear as the first argument on the command-line after 'dwi2response'. The subsequent compulsory arguments and options available depend on the particular algorithm being invoked. Each algorithm available also has its own help page, including necessary references; e.g. to see the help page of the 'fa' algorithm, type 'dwi2response fa'.",
    "inputs": [
        {
            "command-line-flag": "-grad",
            "description": "Specify the diffusion-weighted gradient scheme used in the acquisition. The program will normally attempt to use the encoding stored in the image header. This should be supplied as a 4xN text file with each line is in the format [ X Y Z b ], where [ X Y Z ] describe the direction of the applied gradient, and b gives the b-value in units of s/mm^2.",
            "id": "grad",
            "name": "grad",
            "optional": true,
            "type": "File",
            "value-key": "[GRAD]"
        },
        {
            "command-line-flag": "-fslgrad",
            "description": "Specify the diffusion-weighted gradient scheme used in the acquisition in FSL bvecs/bvals format.",
            "id": "fslgrad",
            "name": "fslgrad",
            "optional": true,
            "type": "Flag",
            "value-key": "[FSLGRAD]",
            "requires-inputs": ["bvecs", "bvals"]
        },
        {
            "description": "specify the diffusion-weighted gradient scheme used in the acquisition in FSL bvecs format.",
            "id": "bvecs",
            "name": "bvecs",
            "optional": true,
            "type": "File",
            "value-key": "[BVECS]",
            "requires-inputs": ["fslgrad", "bvals"]
        },
        {
            "description": "specify the diffusion-weighted gradient scheme used in the acquisition in FSL bvals format.",
            "id": "bvals",
            "name": "bvals",
            "optional": true,
            "type": "File",
            "value-key": "[BVALS]",
            "requires-inputs": ["fslgrad", "bvecs"]
        },
        {
            "command-line-flag": "-bvalue_scaling",
            "description": "Specifies whether the b-values should be scaled by the square of the corresponding DW gradient norm, as often required for multi-shell or DSI DW acquisition schemes. The default action can also be set in the MRtrix config file, under the BValueScaling entry. Valid choices are yes/no, true/false, 0/1.",
            "id": "bvalue_scaling",
            "name": "bvalue_scaling",
            "optional": true,
            "type": "String",
            "value-key": "[BVALUE_SCALING]",
            "value-choices": ["yes", "no", "true", "false", "0", "1"]
        },
        {
            "command-line-flag": "-shell",
            "description": "Specify one or more diffusion-weighted gradient shells to use during processing, as a comma-separated list of the desired approximate b-values. Note that some commands are incompatible with multiple shells, and will throw an error if more than one b-value are provided.",
            "id": "shell",
            "name": "Diffusion-weighted gradient shell(s)",
            "optional": true,
            "list": true,
            "type": "Number",
            "value-key": "[SHELL]"
        },
        {
            "command-line-flag": "-mask",
            "description": "Provide an initial mask image",
            "id": "mask",
            "name": "Initial mask image",
            "optional": true,
            "type": "File",
            "value-key": "[MASK]"
        },
        {
            "command-line-flag": "-lmax",
            "description": "Specify the maximum harmonic degree of the response function to estimate",
            "id": "lmax",
            "name": "Maximum harmonic degree",
            "optional": true,
            "type": "Number",
            "value-key": "[LMAX]"
        },
        {
            "command-line-flag": "-sf",
            "description": "Output a mask highlighting the final selection of single-fibre voxels",
            "id": "sf",
            "name": "single-fiber voxels",
            "optional": true,
            "type": "File",
            "value-key": "[SF]"
        },
        {
            "command-line-flag": "-test_all",
            "description": "By default, only those voxels selected as single-fibre in the previous iteration are evaluated. Set this option to re-test all voxels at every iteration (slower).",
            "id": "test_all",
            "name": "test_all",
            "optional": true,
            "type": "Flag",
            "value-key": "[TEST_ALL]"
        },
        {
            "command-line-flag": "-max_iters",
            "description": "Maximum number of iterations per pass (set to zero to disable)",
            "id": "max_iters",
            "name": "max_iters",
            "optional": true,
            "integer": true,
            "type": "Number",
            "value-key": "[MAX_ITERS]"
        },
        {
            "command-line-flag": "-max_change",
            "description": "Maximum percentile change in any response function coefficient; if no individual coefficient changes by more than this fraction, the algorithm is terminated.",
            "id": "max_change",
            "name": "max_change",
            "optional": true,
            "type": "Number",
            "value-key": "[MAX_CHANGE]"
        },
        {
            "command-line-flag": "-volume_ratio",
            "description": "Required volume ratio between largest FOD lobe and the sum of all other positive lobes in the voxel",
            "id": "volume_ratio",
            "name": "volume_ratio",
            "optional": true,
            "type": "Number",
            "value-key": "[VOLUME_RATIO]"
        },
        {
            "command-line-flag": "-dispersion_multiplier",
            "description": "Dispersion of FOD lobe must not exceed some threshold as determined by this factor and FOD dispersion statistics. The threshold is: (mean + (multiplier * (mean - min))). Criterion is only applied in second pass of RF estimation.",
            "id": "dispersion_multiplier",
            "name": "dispersion_multiplier",
            "optional": true,
            "type": "Number",
            "value-key": "[DISPERSION_MULTIPLIER]"
        },
        {
            "command-line-flag": "-integral_multiplier",
            "description": "Integral of FOD lobe must not be outside some range as determined by this factor and FOD lobe integral statistics. The range is: (mean +- (multiplier * stdev)). Criterion is only applied in second pass of RF estimation.",
            "id": "integral_multiplier",
            "name": "integral_multiplier",
            "optional": true,
            "type": "Number",
            "value-key": "[INTEGRAL_MULTIPLIER]"
        },
        {
            "command-line-flag": "-info",
            "description": "Display information messages.",
            "id": "info",
            "name": "info",
            "optional": true,
            "type": "Flag",
            "value-key": "[INFO]"
        },
        {
            "command-line-flag": "-quiet",
            "description": "Do not display information messages or progress status.",
            "id": "quiet",
            "name": "quiet",
            "optional": true,
            "type": "Flag",
            "value-key": "[QUIET]"
        },
        {
            "command-line-flag": "-debug",
            "description": "Display debugging messages.",
            "id": "debug",
            "name": "debug",
            "optional": true,
            "type": "Flag",
            "value-key": "[DEBUG]"
        },
        {
            "command-line-flag": "-force",
            "description": "Force overwrite of output files.",
            "id": "force",
            "name": "force",
            "optional": true,
            "type": "Flag",
            "value-key": "[FORCE]"
        },
        {
            "command-line-flag": "-nthreads",
            "description": "Use this number of threads in multi-threaded applications",
            "id": "nthreads",
            "name": "nthreads",
            "optional": true,
            "integer": true,
            "type": "Number",
            "value-key": "[NTHREADS]"
        },
        {
            "command-line-flag": "-failonwarn",
            "description": "Terminate program if a warning is produced",
            "id": "failonwarn",
            "name": "failonwarn",
            "optional": true,
            "type": "Flag",
            "value-key": "[FAILONWARN]"
        },
        {
            "command-line-flag": "-help",
            "description": "Display this information page and exit",
            "id": "help",
            "name": "help",
            "optional": true,
            "type": "Flag",
            "value-key": "[HELP]"
        },
        {
            "command-line-flag": "-version",
            "description": "Display version information and exit",
            "id": "version",
            "name": "version",
            "optional": true,
            "type": "Flag",
            "value-key": "[VERSION]"
        },
        {
            "command-line-flag": "-dwi_in",
            "description": "The input diffusion-weighted images",
            "id": "dwi_in",
            "name": "dwi_in",
            "optional": false,
            "type": "File",
            "value-key": "[DWI_IN]"
        },
        {
            "command-line-flag": "-response_out",
            "description": "The output rotational harmonic coefficients",
            "id": "response_out",
            "name": "response_out",
            "optional": false,
            "type": "File",
            "value-key": "[RESPONSE_OUT]"
        }
    ],
    "output-files": [
        {
            "id": "rotational_harmonic_coefficient_out",
            "name": "Rotational harmonic coefficient output",
            "optional": false,
            "path-template": "[RESPONSE_OUT].txt",
            "path-template-stripped-extensions": [
                ".nii.gz",
                ".nii",
                ".json"
            ]
        },
        {
            "id": "sf_voxels_mask",
            "name": "SF voxels selection mask",
            "optional": true,
            "path-template": "[SF].mif",
            "path-template-stripped-extensions": [
                ".nii.gz",
                ".nii",
                ".json"
            ]
        }
    ],
    "schema-version": "0.5",
    "suggested-resources": {
        "cpu-cores": 1,
        "ram": 2048,
        "walltime-estimate": 20
    },
    "tags": {
        "domain": [
            "neuroinformatics",
            "image processing",
            "mri",
            "dwi",
            "tractography"
        ]
    },
    "tool-version": "v0.1.0"
}